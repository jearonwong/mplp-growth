# V0.7.1 SEAL RECORD

**Status**: SEALED
**Date**: 2026-02-26
**Tag**: `mplp-growth-v0.7.1`

## Verification Gates

| Gate              | Result  | Evidence                                                                                                                                                      |
| ----------------- | ------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| RC-1 Version SSOT | ✅ PASS | package.json / UI header / /api/health all == 0.7.1                                                                                                           |
| RC-3 Tests        | ✅ PASS | vitest 157 pass; phase22 6/6, phase23 3/3, phase24 5/5; tsc 0 errors. Phase18 port-conflict flake is **pre-existing/non-regression** (isolated run: 4/4 PASS) |

## Product Delta

### Item 1 — Default Role Reset

- `setConfig({ run_as_role: null })` deletes the field (was no-op before)
- UI sends `null` on "Default" selection + re-reads status

### Item 2 — Selective Inbox Redraft

- `POST /api/queue/:id/redraft` accepts `interaction_ids?: string[]`
- UI: per-interaction checkboxes + selection count in redraft modal

### Item 3 — Transparent Redraft Metadata

- Queue API returns `redrafted_by_role`, `redraft_version`, `redraft_rationale_bullets`
- UI: "→ Redrafted by" badge + split "Why (draft)" / "Why (redraft)"

### Item 4 — API-only E2E

- `phase24-api-only-rc2.test.ts` proves full cycle via inject

## Hard Constraints (Unchanged)

- No LLM integration
- No external sending (export-pack only)
- No new workflows
- No new domain nodes
- Deterministic executor remains SSOT

## Files Modified

### Backend

- `src/runner/state.ts` — `run_as_role: null` handling, `JobConfig` type widened
- `src/server/index.ts` — config body type, redraft `interaction_ids` filter, redraft metadata surfacing, `redraft_rationale_bullets` separation
- `src/server/json-schema.ts` — `QueueItem` type: interaction `id`, redraft metadata fields

### UI

- `src/ui-static/settings.html` — version bump v0.7.1
- `src/ui-static/queue.html` — `redraft-selection-count` element
- `src/ui-static/app.js` — `changeJobRole` null, interaction checkboxes, `toggleInteractionSelect`, redraft badge, split Why bullets

### Tests

- `src/phase22-default-role-reset.test.ts` — 6 gate tests
- `src/phase23-inbox-selective-redraft.test.ts` — 3 gate tests
- `src/phase24-api-only-rc2.test.ts` — 5 gate tests

### Other

- `package.json` — version 0.7.1
- `RELEASE_NOTES_0.7.1.md` — release notes
