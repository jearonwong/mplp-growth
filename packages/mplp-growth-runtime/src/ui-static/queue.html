<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Queue - MPLP Growth Cockpit</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div class="sidebar">
      <div class="brand">ðŸš€ MPLP Growth</div>
      <ul class="nav-links">
        <li><a href="index.html">Dashboard</a></li>
        <li><a href="queue.html" class="active">Queue</a></li>
        <li><a href="settings.html">Settings</a></li>
      </ul>
    </div>

    <div class="main-content">
      <header>
        <h1>Approval Queue</h1>
        <div class="status-badge" id="global-header-stats"></div>
      </header>

      <div id="queue-list" class="queue-list">
        <div class="card" style="text-align: center">Loading queue...</div>
      </div>
      <div id="edit-modal" class="modal-overlay hidden">
        <div class="modal-content" style="max-width: 600px">
          <h2 style="margin-top: 0">Edit Draft</h2>
          <input type="hidden" id="edit-asset-id" />
          <textarea
            id="edit-textarea"
            rows="12"
            style="
              width: 100%;
              padding: 8px;
              margin-top: 10px;
              margin-bottom: 20px;
              font-family: monospace;
              border: 1px solid var(--border-color);
              border-radius: 4px;
            "
          ></textarea>
          <div class="modal-actions">
            <button class="btn btn-secondary" onclick="app.handlers.closeEditModal()">
              Cancel
            </button>
            <button class="btn btn-primary" onclick="app.handlers.saveEdit()">Save Draft</button>
          </div>
        </div>
      </div>

      <div id="impact-modal" class="modal-overlay hidden">
        <div class="modal-content">
          <h2 style="margin-top: 0">Approval Impact</h2>
          <div style="margin-top: 10px; margin-bottom: 10px">
            <span id="impact-badge" class="badge"></span>
          </div>
          <div id="impact-role-badge"></div>
          <p id="impact-summary" style="color: var(--text-secondary)"></p>

          <div class="impact-section">
            <h4 style="color: var(--success-color); margin-bottom: 0">âœ“ Will Execute</h4>
            <ul id="impact-will-change"></ul>
          </div>

          <div class="impact-section">
            <h4 style="color: var(--danger-color); margin-bottom: 0">âœ— Will NOT Do</h4>
            <ul id="impact-will-not"></ul>
          </div>

          <div class="modal-actions">
            <button class="btn btn-secondary" onclick="app.handlers.closeImpactModal()">
              Cancel
            </button>
            <button class="btn btn-success" id="impact-confirm-btn">Confirm Approval</button>
          </div>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        app.initGlobalHeader();
        app.initQueue();
      });
    </script>
  </body>
</html>
