# V0.7.0 SEAL RECORD

**Status**: SEALED
**Date**: 2026-02-25
**Tag**: `mplp-growth-v0.7.0`

## Verification Gates

| Gate                | Result  | Evidence                                                                              |
| ------------------- | ------- | ------------------------------------------------------------------------------------- |
| RC-1 Version SSOT   | ✅ PASS | package.json / UI header / /api/health all == 0.7.0                                   |
| RC-2 Founder 3-min  | ✅ PASS | job run_as_role → queue drafted_by_role+why → redraft as role → confirm stays pending |
| RC-3 Tests + Docker | ✅ PASS | vitest 147/147 pass; tsc 0 errors                                                     |

## Product Delta

### P1 — Multi-Agent Job Routing

- Jobs support `run_as_role` (Settings UI + API)
- Dual-write: `ContentAsset.metadata.drafted_by_role` + `Plan.agent_role`

### P2 — Queue Redraft as Role

- `POST /api/queue/:id/redraft` rewrites draft text + metadata
- No state advance: Confirm/Target/Interaction statuses unchanged
- Bounded rationale: ≤3 bullets

## Hard Constraints (Unchanged)

- No LLM integration
- No external sending (export-pack only)
- No new workflows
- No new domain nodes
- Deterministic executor remains SSOT

## Files Modified

### Backend

- `src/runner/state.ts` — `run_as_role` on `JobConfig`, `setConfig` signature fix
- `src/runner/tasks.ts` — `--role-id` flag forwarding
- `src/commands/orchestrator.ts` — `--role-id` parsing in `cmdInbox`/`cmdOutreach`
- `src/server/index.ts` — API config/status exposure + `POST /api/queue/:id/redraft`
- `src/workflows/types.ts` — `role_id?: AgentRole` on `WorkflowInput`
- `src/workflows/wf04-inbox-handler.ts` — dynamic role in executor + metadata
- `src/workflows/wf06-outreach.ts` — dynamic role in executor + metadata

### UI

- `src/ui-static/settings.html` — "Run as Role" column + version bump
- `src/ui-static/queue.html` — Redraft Modal
- `src/ui-static/app.js` — Role dropdown, changeJobRole handler, redraft handlers

### Tests

- `src/phase12-health.test.ts` — removed hardcoded version
- `src/phase20-role-routing.test.ts` — 9 gate tests (P1)
- `src/phase21-redraft.test.ts` — 11 gate tests (P2)

### Other

- `diag.ts` — fixed EventEmitter import
- `src/phase17-ui-attribution.test.ts` — jsdom type suppression
- `package.json` — version 0.7.0
- `RELEASE_NOTES_0.7.0.md` — release notes
