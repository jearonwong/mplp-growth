<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Settings - MPLP Growth Cockpit</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div class="sidebar">
      <div class="brand">ðŸš€ MPLP Growth</div>
      <ul class="nav-links">
        <li><a href="index.html">Dashboard</a></li>
        <li><a href="queue.html">Queue</a></li>
        <li><a href="settings.html" class="active">Settings</a></li>
      </ul>
    </div>

    <div class="main-content">
      <header>
        <h1>Settings</h1>
        <div class="status-badge" id="global-header-stats"></div>
      </header>

      <div class="card">
        <h3>Runner Configuration</h3>
        <p id="policy-display">
          Current Policy: <span style="color: var(--accent-color)">Safe Mode</span>
        </p>
        <div style="margin-top: 15px; display: flex; align-items: center; gap: 10px">
          <label>
            <input
              type="checkbox"
              id="auto-publish-toggle"
              onchange="app.handlers.toggleAutoPublish(event)"
            />
            Enable Auto-Publish
          </label>
          <span style="font-size: 12px; color: var(--text-secondary)">
            (Requires Aggressive policy)
          </span>
        </div>
      </div>

      <div class="card" style="margin-top: 20px">
        <h3>Background Jobs</h3>
        <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 15px">
          Manage the automated lifecycle tasks and scheduled triggers.
        </p>
        <div style="overflow-x: auto">
          <table
            class="data-table"
            style="width: 100%; text-align: left; border-collapse: collapse"
          >
            <thead>
              <tr style="border-bottom: 1px solid var(--border-color)">
                <th style="padding: 10px">Job ID</th>
                <th style="padding: 10px">Schedule</th>
                <th style="padding: 10px">Status</th>
                <th style="padding: 10px">Next Run</th>
                <th style="padding: 10px">Action</th>
              </tr>
            </thead>
            <tbody id="jobs-table-body">
              <tr>
                <td
                  colspan="5"
                  style="padding: 15px; text-align: center; color: var(--text-secondary)"
                >
                  Loading jobs...
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="card" style="margin-top: 20px">
        <h3>Role Registry</h3>
        <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 15px">
          The deterministic multi-agent roles available in the system.
        </p>
        <div style="overflow-x: auto">
          <table
            class="data-table"
            style="width: 100%; text-align: left; border-collapse: collapse"
          >
            <thead>
              <tr style="border-bottom: 1px solid var(--border-color)">
                <th style="padding: 10px">Role</th>
                <th style="padding: 10px">Capabilities</th>
              </tr>
            </thead>
            <tbody id="roles-table-body">
              <tr>
                <td
                  colspan="2"
                  style="padding: 15px; text-align: center; color: var(--text-secondary)"
                >
                  Loading roles...
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="card" style="margin-top: 20px">
        <h3>System Config (P1)</h3>
        <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 5px">
          HackerNews Keywords (via ENV or config.json)
        </p>
        <div
          id="hn-keywords-display"
          style="
            padding: 10px;
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: monospace;
            font-size: 13px;
          "
        >
          Loading...
        </div>
      </div>

      <div class="card" style="margin-top: 20px">
        <h3>Initialize Data (P2)</h3>
        <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 15px">
          Seed the Graph with ground truth context, channels, and templates. Safe to run multiple
          times.
        </p>
        <button class="btn btn-outline" onclick="app.handlers.seedData(event)" id="seed-btn">
          ðŸŒ± Seed Now
        </button>
        <span
          id="seed-status"
          style="margin-left: 10px; font-size: 13px; color: var(--text-secondary)"
        ></span>
      </div>

      <div class="card" style="margin-top: 20px">
        <h3>System Info</h3>
        <footer>
          <p>Runtime v0.6.1</p>
          <p>Copyright &copy; 2026 MPLP</p>
        </footer>
      </div>
    </div>

    <script src="app.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", async () => {
        await app.initGlobalHeader();
        await app.initSettings();
      });
    </script>
  </body>
</html>
